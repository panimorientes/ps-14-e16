package main;

import homePage.SearchResultPage;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JFrame;

import profilePage.DataManager;
import profilePage.ProfileFrame;

import common.BotInfoPanel;
import common.TopInfoPanel;

public class NinjaFrame extends JFrame {

	private BotInfoPanel botP;
	private TopInfoPanel topP;
	private SearchResultPage sCenterP;
	private ProfileFrame profile;
	private JButton prueba;

	/**
	 * Constructor method of the parent of my componetns
	 */
	public NinjaFrame() {

		profile = new ProfileFrame();
		botP = new BotInfoPanel();
		sCenterP = new SearchResultPage();
		topP = new TopInfoPanel(this, sCenterP);

		// //TEST CODE TO GET A WELCOME PAGE ONLY A BUTTON
		this.setVisible(true);
		this.setExtendedState(JFrame.MAXIMIZED_BOTH);
		this.setDefaultCloseOperation(EXIT_ON_CLOSE);

		prueba = new JButton(
				"ESTE BOTON ES DE PRUEBA; LA APLICACION TENDRA PANTALLA INICIAL!!");
		this.add(prueba);

		prueba.addActionListener(new ActionListener() {
			public void actionPerformed(ActionEvent e) {

				iniciateFrame();

			}
		});
		//
		// //END CODE TEST
		iniciateFrame();
	}

	/**
	 * Iiciate the JFrame.
	 */
	private void iniciateFrame() {

		// this.remove(prueba);
		this.setSize(1366, 720);
		this.setResizable(false);
		this.setLocationRelativeTo(null);
		this.setIconImage((new ImageIcon("coctailsImgs/logoMin.jpg").getImage()));
		this.setTitle("SOFTWARE NINJAS");
		this.setLayout(new BorderLayout());
		this.add(botP, BorderLayout.SOUTH);
		this.add(topP, BorderLayout.NORTH);
		this.add(sCenterP, BorderLayout.CENTER);

		this.setVisible(true);
		this.setExtendedState(JFrame.MAXIMIZED_BOTH);
		this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		this.validate();
		this.repaint();
	}

	public static void main(String[] args) {
		if (DataManager.isInstalled()) {
			new NinjaFrame();
		} else {
			new ProfileFrame();
			while(!DataManager.installed){
				//Espera hasta que han sido rellenados los datos de instalacion
			}
			new NinjaFrame();
		}

	}

	/**
	 * Shows a new JFrame with the prifile info
	 */
	public void showProfile() {
		profile.setVisible(true);
	}

}
