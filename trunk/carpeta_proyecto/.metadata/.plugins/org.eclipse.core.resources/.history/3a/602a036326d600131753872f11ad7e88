package homePage;

import java.awt.Font;
import java.awt.GridLayout;
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Vector;

import javax.swing.JLabel;
import javax.swing.JPanel;

import connection.ConnectionPool;
import connection.DataBaseNames;
import connection.DataManager;

public class CenterPagePanel extends JPanel {

	private static final int COCTAILS_PER_PAGE = 9;
	private static String SPACE = " ";

	/**
	 * Method Constructor, The constructor makes a new Object who contains 9
	 * coctailt from the DB.
	 * 
	 * @param myDB
	 * @param nPage
	 *            , number of the page
	 * @param searchPage
	 *            , my parent, usedto link
	 */
	public CenterPagePanel(int nPage, SearchResultPage searchPage, String query) {
		int skipedCoctails = (nPage - 1) * COCTAILS_PER_PAGE;
		query = query+DataManager.LIMIT+skipedCoctails+DataManager.DATA_SEPARATOR+COCTAILS_PER_PAGE;
		String whatToSelect=DataBaseNames.COCTAIL_COLUM_NAME+SPACE+DataBaseNames.COCTAIL_COLUM_PRICE+SPACE+DataBaseNames.COCTAIL_COLUM_DESCR+SPACE+DataBaseNames.COCTAIL_COLUM_PATH_IMG;
		Vector<String> data = DataManager.getData(query,
				DataManager.getColumns(whatToSelect));


		
		
		String img,name, descr;
		
		this.setLayout(new GridLayout(0, 3));
		for(int j =0; j<data.size();j=j+4){
			name=data.get(j);
			descr = data.get(j+2);
			img = data.get(j+3);
			this.add(new CoctailDescriptionPanel(img, name, descr,
					searchPage));
		}
//		try {
//			Connection c = ConnectionPool.getConnection();
//			Statement st = c.createStatement();
//			ResultSet rs = st.executeQuery(query + " limit " + skipedCoctails
//					+ ",9");
//			String img, name, descr;
//
//			while (rs.next()) {
//				name = rs.getString("nombre");
//				rs.getDouble("precio");
//				descr = rs.getString("Descripcion");
//				img = rs.getString("PathImg");
//				this.add(new CoctailDescriptionPanel(img, name, descr,
//						searchPage));
//
//			}
//			rs.close();
//			st.close();
//			ConnectionPool.returnConnection(c);
//		} catch (SQLException e) {
//			System.out.println("error centerPagePanel");
//			e.printStackTrace();
//		}
	}
}
